# ğŸˆ Live Data Integration Complete!

Your CFP AI Tracker now supports **real-time game tracking** from ESPN! 

## What's New?

âœ… **Live ESPN Data Integration**  
âœ… **Real-time Score Updates**  
âœ… **Player Stats Tracking**  
âœ… **Automatic Game Detection**  
âœ… **Edge-Triggered Updates (Efficient)**  

## Get Started in 3 Steps

### 1ï¸âƒ£ Install Dependencies
```bash
pip install httpx fastapi uvicorn jinja2 python-dotenv pydantic
```

### 2ï¸âƒ£ Find a Live Game
```bash
python find_live_games.py
```

Copy a **Game ID** from the output (e.g., `401635594`)

### 3ï¸âƒ£ Configure & Run

Create `.env` file:
```bash
DEMO_MODE=0
ESPN_GAME_ID=401635594
TRACKED_PLAYER=Fernando Mendoza
```

**No API key needed!** Uses intelligent rule-based commentary.

Start server:
```bash
uvicorn app.main:app --reload
```

Open: **http://localhost:8000**

## ğŸ“ Files Modified

### Core Application
- âœï¸ `app/config.py` - Added ESPN game ID and tracked player settings
- âœï¸ `app/data_sources.py` - Added live ESPN API integration
- âœï¸ `app/main.py` - Made player name configurable

### Documentation
- âœï¸ `README.md` - Updated with live data instructions
- ğŸ“„ `SETUP.md` - Comprehensive setup guide
- ğŸ“„ `QUICKSTART.md` - 5-minute quick start
- ğŸ“„ `CHANGES.md` - Detailed technical changes

### Helper Scripts
- ğŸ“„ `find_live_games.py` - Find live games and get IDs
- ğŸ“„ `test_espn_live.py` - Test ESPN API integration

## ğŸ¯ How to Use

### Demo Mode (Default - No Changes)
```bash
DEMO_MODE=1
```
Uses pre-recorded events from `demo_data/demo_events.json`

### Live Mode (NEW!)
```bash
DEMO_MODE=0
ESPN_GAME_ID=401635594
```
Fetches real-time data from ESPN API

## ğŸ”§ Testing Before Running

### Find Available Games
```bash
python find_live_games.py
```

Shows all current games:
```
ğŸ”´ LIVE IND @ MIA
  Game ID: 401635594
  Indiana @ Miami
  Score: 14 - 17
  Q3 - 8:42
```

### Test ESPN Connection
```bash
python test_espn_live.py 401635594
```

Verifies:
- ESPN API is accessible
- Game ID is valid
- Data parsing works correctly
- Player stats are found

## ğŸ“Š What Gets Tracked

### From ESPN API
- Live scores (home/away)
- Game status (pregame/live/final)
- Quarter and game clock
- Team names
- Player passing stats:
  - Passing yards
  - Touchdowns
  - Interceptions

### Generated by Intelligent Rules
- Live commentary on plays
- Win probability with explanations
- Player performance analysis
- Postgame recap

*No API keys required! Smart rule-based system.*

## ğŸš€ Pro Tips

### Efficient Polling
The system uses **edge-triggered updates**:
- Only updates when game state changes
- Prevents duplicate API calls
- Saves AI tokens
- No unnecessary polling

### Multiple Games
Switch games anytime:
```bash
# Edit .env
ESPN_GAME_ID=401635595  # New game ID
# Restart server
```

### Player Tracking
Track any player:
```bash
TRACKED_PLAYER=Cam Ward
```
Name must match ESPN roster exactly.

### Manual Polling
Trigger updates manually:
```bash
curl -X POST http://localhost:8000/admin/poll
```

## ğŸ“– Documentation Quick Links

- **Quick Start**: [QUICKSTART.md](QUICKSTART.md) - Get running in 5 minutes
- **Full Setup**: [SETUP.md](SETUP.md) - Detailed configuration
- **Changes**: [CHANGES.md](CHANGES.md) - Technical details
- **README**: [README.md](README.md) - Project overview

## âš ï¸ Important Notes

### No Breaking Changes
âœ… Existing demo mode works exactly as before  
âœ… Default behavior unchanged  
âœ… Live mode is opt-in  

### Dependencies
All required packages were already in `pyproject.toml`:
- `httpx` - HTTP client for ESPN API
- `fastapi` - Web framework
- `uvicorn` - ASGI server
- `jinja2` - Templating
- `pydantic` - Settings management

### ESPN API
- **Free**: No API key required
- **Rate limits**: Unknown, be reasonable
- **Updates**: ~30-60 second delay from live TV

## ğŸ› Troubleshooting

### Installation Issues
See [SETUP.md](SETUP.md) section "Installation Troubleshooting"

Common fixes:
```bash
# SSL certificate errors
pip install --trusted-host pypi.org --trusted-host pypi.python.org ...

# Permission errors  
python -m venv venv && source venv/bin/activate
```

### Commentary System
See [NO_API_KEY_NEEDED.md](NO_API_KEY_NEEDED.md) for details on how the rule-based commentary works

### No Games Found
- Check if college football season is active
- Try during game hours (typically Saturdays)
- Verify internet connection

### Player Stats Missing
- Player name must match ESPN roster exactly
- Player must be in the game and have stats
- Check ESPN.com to see their name format

### Connection Errors
- Verify game ID is correct (use `find_live_games.py`)
- Check internet connection
- ESPN may have rate limits (wait and retry)

## ğŸ“ Architecture

```
Browser â†’ FastAPI Server â†’ fetch_state()
                              â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                  DEMO?              LIVE
                     â†“                 â†“
                 JSON File       ESPN API
                     â†“                 â†“
                GameState â† GameState
                     â†“
              Fingerprint (SHA256)
                     â†“
            Changed? â†’ Yes â†’ AI Commentary
                     â†“
              Update Dashboard
```

### Edge-Triggered Updates
1. Compute hash of game state (fingerprint)
2. Compare to previous fingerprint
3. Only update if different
4. Prevents duplicate commentary

## ğŸ”® What's Next?

Possible enhancements:
- Multiple player tracking
- Team statistics
- Play-by-play feed
- WebSocket live updates
- Auto-game detection
- Betting odds

## ğŸ“ Need Help?

1. **Quick Start**: Read [QUICKSTART.md](QUICKSTART.md)
2. **Setup Issues**: Check [SETUP.md](SETUP.md)
3. **Technical Details**: See [CHANGES.md](CHANGES.md)
4. **Test Scripts**: Run `find_live_games.py` or `test_espn_live.py`

## âœ… Summary

**What Changed:**
- Added ESPN API integration
- Made player tracking configurable
- Created helper scripts
- Updated documentation

**What Didn't Change:**
- Demo mode still works
- UI unchanged
- API endpoints same
- Core logic intact

**Result:**
ğŸ‰ **Your app now tracks live college football games in real-time!** ğŸ‰

---

Ready to track your first live game? Start with:
```bash
python find_live_games.py
```

Then follow [QUICKSTART.md](QUICKSTART.md) for the rest!
